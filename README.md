# nSeed

<div style="display:flex;justify-content:center;flex-direction:column;align-items:center">
	<span style="width: 16rem;height:16rem">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 200 200"><defs><style>.cls-1{fill:#f7df1e;}.cls-2{fill:none;stroke:#000;stroke-miterlimit:10;}</style></defs><title>nSeed Logo</title><rect class="cls-1" x="0" y="0" width="100%" height="100%"/><path class="cls-2" d="M99.43,167.42a19.71,19.71,0,0,0,7.71,6.54l4,4a16.27,16.27,0,0,0,4.82,2.71c13.82,4.88,29.46-11.41,30.51-12.52a149.34,149.34,0,0,0,14.76-24.09,151.47,151.47,0,0,0,14.33-48.86c-.28-7.53-.91-10.14-1.55-10.76a4.75,4.75,0,0,1-.84-1.06,4.9,4.9,0,0,1-.58-1.74c-1.6-2.11-3-2.65-4-2.74a21.84,21.84,0,0,0-2.89.27,25.62,25.62,0,0,1-3.39,0c-2.39-.07-5,1-7.42,2.58a256.58,256.58,0,0,0-24,16.93c-11.08,8.8-19,15.2-26.61,25.53-4.5,6.11-19.45,26.46-12.44,37.61A14.36,14.36,0,0,0,99.43,167.42Z"/><path d="M93.81,161.51c-2.73-3.74-1.44-9.16-.77-12,3.48-14.62,21-32.78,23.75-35.62,15-15.38,20.07-15.78,30.21-25.21A40.25,40.25,0,0,1,157,82.46a13.78,13.78,0,0,1,5.66-1.29c.89,0,1.33,0,1.48.13,1.84,1.64-12.71,19.39-27.36,40.55-11.26,16.27-16.71,26.08-31.2,43.91-1.58,2-4.57,3.41-3.46,4.21a24.16,24.16,0,0,1-3.58-3.35C95.37,163.16,94.51,162.47,93.81,161.51Z"/><path d="M104.51,171.59c.14.22.82.24,2.58,0s3.25-.53,3.63-.62c8-1.95,20.24-19.77,20.24-19.77,2.44-3.55,4.25-6.34,6.68-10.14,9.17-14.35,13.75-21.52,17.22-27.71C163,98.9,167.5,87.48,167.81,87.62s-1.5,4.36-3.08,8.15c-9.17,22-18.37,36-32.56,57.36a83,83,0,0,1-10.8,12.3c-3.58,3.45-6,5.2-9.19,6.09-2.92.81-6.17.81-6.15,1.14s1.19.23,3,.6a24.26,24.26,0,0,1,5,1.67c4.41,1.72,13.34-4.11,19.94-10.92a61.47,61.47,0,0,0,6.63-8.19,191.44,191.44,0,0,0,16.72-29.59c.92-2,3.86-9.56,9.75-24.67a67.12,67.12,0,0,0,2.4-7.27,66.45,66.45,0,0,0,1.82-9.88l-1.76-1.63-2.74-.62c-.33,1-.88,2.52-1.62,4.44a152.33,152.33,0,0,1-12.21,24.59c-5.8,9.67-23.93,39.83-41.15,53.23C111.5,164.59,103.85,170.56,104.51,171.59Z"/><path d="M103.72,169.81a34.59,34.59,0,0,0,3.74-2.58,34,34,0,0,0,3.37-3.08c6.6-6.82,11.34-12.86,11.34-12.87,5-6.33,8.49-11.3,8.83-11.78,0,0,22.76-32.17,32-50.19a35.45,35.45,0,0,0,1.92-4.6,28.59,28.59,0,0,0,.82-3.08,57.42,57.42,0,0,1-5.87,11.74c-14.15,21.8-21.23,32.7-29.86,44.47-3.85,5.24-5.93,7.93-9.48,12.53A190.84,190.84,0,0,1,108,165.43C106.24,167.31,104.74,168.81,103.72,169.81Z"/><path d="M172.45,85.81l.76,1.27a128.79,128.79,0,0,1-9.44,43.66c-7.22,17.54-25.88,51.47-44.22,49.07a16.65,16.65,0,0,1-8-3.54,3.07,3.07,0,0,1,1-.63,4.24,4.24,0,0,1,3.11.34s1.21.46,6-.43C136.42,172.8,150.36,148,150.36,148,157,136.08,166.7,115.59,172.45,85.81Z"/></svg>
	</span>
	<div style="margin-top:2rem;margin-bottom:2rem;">
		<a href="https://www.npmjs.com/package/nSeed"><img src="https://img.shields.io/npm/v/nSeed"></a>
		<a href="https://github.com/F2BEAR/nSeed/blob/master/LICENSE"><img src="https://img.shields.io/badge/License-MIT-green"></a>
		<a href="https://github.com/F2BEAR/nSeed/issues"><img src="https://img.shields.io/github/issues/F2BEAR/nSeed"></a>
		<a href="https://standardjs.com"><img src="https://img.shields.io/badge/code_style-standard-brightgreen.svg"></a>
		<a href="http://commitizen.github.io/cz-cli/"><img src="https://img.shields.io/badge/commitizen-friendly-brightgreen.svg"></a>
		<a href="https://discord.gg/QXRNvTFu"><img src="https://img.shields.io/badge/Chat-Discord-blue"></a>
	</div>
	<p style="font-style:italic;font-size:25px;">The Node.Js Database Seeder</p>
</div>

----------------

## Overview

nSeed is an Open-Source CLI Tool for NodeJS used to generate and seed your database with fake data for testing purposes, powered by [faker.js](https://fakerjs.dev).

Stop wasting time writing seeders with hard-coded data each time you want to test your new application; just make a template and we'll handle the rest!

## Installation

You can install it locally, globally or as a dev dependency with both npm and yarn:

- _local:_

  `npm install nseed` or `yarn add nseed`

- _dev:_

  `npm install --save-dev nseed` or `yarn add nseed --dev` 

- _global:_

  `npm install -g nseed` or `yarn global add nseed`

## Basic Usage

We want nSeed to be an easy and intuitive tool, so having tons of functionalities was not intended apart from what it promises: 

_" Giving a connection string, a template and the amount of documents to be created, this tool will generate fake data and seed it into your database. "_

The most basic usage is as it follows:

`nseed [connection string] --db [database name] --tmpl [path to template] --amount [amount]`

If you installed it as a dev dependency you can use it with npx:

`npx nseed [connection string] --db [database name] --tmpl [path to template] --amount [amount]`

> **Note**
>
> Currently we only support MongoDB databases, but we plan to expand it to other kind of databases such as PostgreSQL, MySQL, CouchDB, Redis, etc.

# CLI

| Options | Alias | Description |
| -------|-------|-------------|
| --db | -d | Flag used to specify the name of the database to be seeded. |
| --collection | -c | A string denoting the name of the collection to be generated. |
| --tmpl | -t | A Flag to specify the path for the templates to be used. |
| --amount | -a | The number of documents to be generated. |
| --del | N/A | Indicates that the database must be dropped before seeding. |
| --version | -v | Displays the current version. |
| --help | -h | Displays help. |

> **Note**
>
> The CLI will ask you for any non-provided required argument.
>
> The path for the template MUST be a relative path. _(i.e: ./foo/bar.js)_

Example:

```shell
nseed mongodb://localhost:27017/ -d Test -c Users -t './template.js' -a 2000 --del
```

# Templates

nSeed templates are js/ts files which exports an unnamed function which returns the template object. The structure of the templates should be as it follows:

```js
module.exports = () => {
	return {
		"foo": "bar1",
		"foo": "bar",
		"foo": ["bar"],
		"foo": {
			"foo": "baz",
			"foo": "baz",
			"foo": "baz"
		}
	}
}
```

The values on the template can be any kind of valid [JSON Data Type](https://www.w3schools.com/js/js_json_datatypes.asp); but in order to use autogenerated data with the faker methods you must import and instantiate the Types class as follows:

```js
const { Types } = require('nSeed')
const types = new Types()

module.exports = () => {
	return {
		{
			"firstName": types.faker.name.firstName(),
			"lastName": types.faker.name.lastName(),
			"job": types.faker.name.jobTitle(),
			"address" :{
				"line1": "529 14th St NW",
				"line2": "Apt. 742",
				"state": "Florida",
				"zip": 33054,
			},
			"interests": ["Sports", "Videogames", "Technology"],
			"activeUser": true
		}
	}
}
```
The Types class has an instance of Faker.js and some other utility functions you may find useful. You can use any faker method here so you may want to check [their documentation to see what you can do!](FAKERGUIDE)

Here is a list of all functionalities so far:

* __id( value: string | undefined )__: It generates a MongoDB ObjectId, you can give it one as a string on the parameters or it will create one randomly.
* __oneOf( any[] )__: Randomly picks one of the values of a given array (the array on the parameters is required).
* __newDate( string | undefined )__: It generates a date based on the given date-like string. If no value is passed as parameter it will return the current date.

Example:

```js
const { Types } = require('nSeed')
const types = new Types()

module.exports = () => {
	return {
		status: types.oneOf(['active', 'inactive', 'banned', 'bamboozed']),
		firstName: types.faker.name.firstName(),
		lastName: types.faker.name.lastName(),
		gender: types.faker.name.gender(),
		job: types.faker.name.jobTitle()
	}
}
```

> **Note** 
>
> You must have nSeed installed as a dependency on the project in order to import it into your template.

# Configuration

You can configure _nSeed_ with a nseed.config.json file; this gives you the capacity to generate specific configuration per each project you and your team are working on, making it suitable for container environments such as Docker.

All the options available on the CLI can be configured through this file:

```json
{
	"url": "mongodb://<user>:<password>@localgost:27017/",
	"collections": [
		{
			"name": "users",
			"template": "./path/to/template",
			"amount": 70
		},
		{
			"name": "activities",
			"template": "./path/to/template"
		},
		{
			"name": "locations",
			"template": "./path/to/template"
		}
	],
	"amount": 125
}
```

# License

Copyright (c) 2022 Facundo Carbonel / nSeed

This source code is licensed under the MIT license found in the [LICENSE](LICENSE) file in the root directory of this source tree.

# Related

[CONTRIBUTING](CONTRIBUTING) | [ROADMAP](ROADMAP) | [LICENSE](LICENSE) | [ISSUES](ISSUES)

[FAKERGUIDE]: https://fakerjs.dev/guide/
[CONTRIBUTING]: https://github.com/F2BEAR/nSeed/blob/master/CONTRIBUTING.md
[ROADMAP]: https://github.com/F2BEAR/nSeed/blob/master/ROADMAP.MD
[LICENSE]: https://github.com/F2BEAR/nSeed/blob/master/LICENSE
[ISSUES]: https://github.com/F2BEAR/nSeed/issues